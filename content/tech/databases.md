# Базы данных

## Введение

База данных — это организованная коллекция структурированной информации или данных, которые обычно хранятся в электронном виде в компьютерной системе.

## Типы баз данных

### Реляционные базы данных

Реляционные БД организуют данные в таблицы с строками и столбцами, связанными между собой отношениями.

#### Популярные СУБД:

- **MySQL** - открытая реляционная СУБД
- **PostgreSQL** - объектно-реляционная СУБД
- **SQLite** - встраиваемая БД
- **Oracle Database** - коммерческая СУБД
- **Microsoft SQL Server** - СУБД от Microsoft

### NoSQL базы данных

NoSQL БД предназначены для работы с неструктурированными данными и обеспечивают гибкость масштабирования.

#### Типы NoSQL:

- **Документные** (MongoDB, CouchDB)
- **Ключ-значение** (Redis, DynamoDB)
- **Колоночные** (Cassandra, HBase)
- **Графовые** (Neo4j, ArangoDB)

## SQL - Язык запросов

SQL (Structured Query Language) — стандартный язык для работы с реляционными базами данных.

### Основные команды:

```sql
-- Создание таблицы
CREATE TABLE users (
    id INT PRIMARY KEY,
    name VARCHAR(100),
    email VARCHAR(100) UNIQUE
);

-- Вставка данных
INSERT INTO users (id, name, email) 
VALUES (1, 'Иван Иванов', 'ivan@example.com');

-- Выборка данных
SELECT * FROM users WHERE name LIKE 'Иван%';

-- Обновление данных
UPDATE users SET email = 'new@example.com' WHERE id = 1;

-- Удаление данных
DELETE FROM users WHERE id = 1;
```

## Проектирование баз данных

### Нормализация

Процесс организации данных для минимизации избыточности:

- **1НФ** - атомарность значений
- **2НФ** - устранение частичных зависимостей
- **3НФ** - устранение транзитивных зависимостей

### Индексы

Индексы ускоряют поиск данных, но замедляют операции записи:

```sql
-- Создание индекса
CREATE INDEX idx_user_email ON users(email);

-- Составной индекс
CREATE INDEX idx_user_name_email ON users(name, email);
```

## Оптимизация производительности

### Стратегии оптимизации:

1. **Правильное использование индексов**
2. **Оптимизация запросов**
3. **Партиционирование таблиц**
4. **Кэширование результатов**
5. **Репликация и шардинг**

### Анализ производительности:

```sql
-- Анализ плана выполнения запроса
EXPLAIN SELECT * FROM users WHERE email = 'test@example.com';
```

## Транзакции и ACID

### ACID свойства:

- **Atomicity** (Атомарность) - все или ничего
- **Consistency** (Согласованность) - целостность данных
- **Isolation** (Изолированность) - независимость транзакций
- **Durability** (Долговечность) - сохранность изменений

### Уровни изоляции:

1. **READ UNCOMMITTED** - самый низкий уровень
2. **READ COMMITTED** - чтение зафиксированных данных
3. **REPEATABLE READ** - повторяемое чтение
4. **SERIALIZABLE** - самый высокий уровень

## Резервное копирование и восстановление

### Типы резервных копий:

- **Полное копирование** - вся база данных
- **Инкрементное** - только изменения
- **Дифференциальное** - изменения с последней полной копии

### Стратегии восстановления:

- **Point-in-time recovery** - восстановление на определенный момент
- **Hot backup** - копирование без остановки БД
- **Cold backup** - копирование при остановленной БД

## Современные тренды

- **NewSQL** - сочетание SQL и NoSQL
- **In-memory databases** - БД в оперативной памяти
- **Cloud databases** - облачные решения
- **Graph databases** - для связанных данных
- **Time-series databases** - для временных рядов